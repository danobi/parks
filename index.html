<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SF Parks</title>
    <style>
        body {
          max-width: 800px;
          margin: 0 auto;
          padding: 20px;
        }

        .controls {
          margin-bottom: 20px;
        }

        select {
          padding: 8px;
          font-size: 16px;
          border-radius: 4px;
          width: 100%;
          max-width: 400px;
        }

        .map-container {
          width: 100%;
          height: 500px;
          border: 1px solid #ccc;
          border-radius: 4px;
          overflow: hidden;
        }

        .map-frame {
          width: 100%;
          height: 100%;
          border: none;
        }
    </style>
  </head>
  <body>
    <div class="controls">
      <select
        onchange="onSelect(this.value)">
      </select>
    </div>

    <div class="map-container">
      <iframe id="map-view" class="map-frame"></iframe>
    </div>

    <script>
      // Fetch parks data and populate dropdown
      fetch('/data/park_sizes.json')
        .then(response => response.json())
        .then(parks => {
          const select = document.querySelector('select');
          Object.entries(parks).forEach(([name, size]) => {
            const option = document.createElement('option');
            option.value = `${name}.html`;
            option.textContent = name;
            if (size != 0) {
              option.textContent += ` (${size} acres)`;
            }
            select.appendChild(option);
          });

          // Set initial selected value
          select.value = 'Presidio of San Francisco.html';
          // Trigger change event to load the map
          select.dispatchEvent(new Event('change'));
        });

      function onSelect(park) {
        document.getElementById('map-view').src = '/data/maps/' + park;
      };
    </script>
  </body>
</html>
